{% extends 'layouts/base-presentation.html' %}

{% block title %} Presentation {% endblock title %}

{% block stylesheets %}{% endblock stylesheets %}

{% block body_class %} index-page {% endblock body_class %}

{% block content %}

  <header class="header-2">
    <div
        class="page-header section-height-75 relative"
        style="background-image: url(
        '/static/assets/img/curved-images/drones/drone1.jpg')">
      <div class="container">
        <div class="row">
          <div class="col-lg-7 text-center mx-auto">
            <h1 class="text-white pt-3 mt-n11">
              <a class="text-white" target="_blank"
                 href="https://appseed.us/ui-kit/soft-ui-design-system">
                Arms Drones Dashboard
              </a>
            </h1>
          </div>
        </div>
      </div>
      <div class="position-absolute w-100 z-index-1 bottom-0">
        <svg
            class="waves"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 24 150 40"
            preserveAspectRatio="none"
            shape-rendering="auto">
          <defs>
            <path
                id="gentle-wave"
                d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
          </defs>
          <g class="moving-waves">
            <use
                xlink:href="#gentle-wave"
                x="48"
                y="-1"
                fill="rgba(255,255,255,0.40" />
            <use
                xlink:href="#gentle-wave"
                x="48"
                y="3"
                fill="rgba(255,255,255,0.35)" />
            <use
                xlink:href="#gentle-wave"
                x="48"
                y="5"
                fill="rgba(255,255,255,0.25)" />
            <use
                xlink:href="#gentle-wave"
                x="48"
                y="8"
                fill="rgba(255,255,255,0.20)" />
            <use
                xlink:href="#gentle-wave"
                x="48"
                y="13"
                fill="rgba(255,255,255,0.15)" />
            <use
                xlink:href="#gentle-wave"
                x="48"
                y="16"
                fill="rgba(255,255,255,0.95" />
          </g>
        </svg>
      </div>
    </div>
  </header>
  <section class="pt-3 pb-4" id="count-stats">
    <div class="container">
      <div class="row">
        <div class="col-lg-9 z-index-2 border-radius-xl mt-n10 mx-auto py-3 blur shadow-blur">
          <div class="row">
            <div class="col-md-4 position-relative">
              <div class="p-3 text-center">
                <h1 class="text-gradient text-info">
                  <span id="state1" countTo="{{ num_tasks_total }}">
                    0
                  </span>
                </h1>
                <h5 class="mt-3">Total Tasks</h5>
                <p class="text-sm">Total number of tasks in production</p>
              </div>
              <hr class="vertical dark">
            </div>
            <div class="col-md-4 position-relative">
              <div class="p-3 text-center">
                <h1 class="text-gradient text-info">
                  <span id="state2" countTo="{{ num_tasks_done }}">
                    0
                  </span>
                </h1>
                <h5 class="mt-3">Completed</h5>
                <p class="text-sm">Total number of completed tasks</p>
              </div>
              <hr class="vertical dark">
            </div>
            <div class="col-md-4">
              <div class="p-3 text-center">
                <h1
                    class="text-gradient text-info"
                    id="state3"
                    countTo="{{ num_tasks_pending }}">
                  0
                </h1>
                <h5 class="mt-3">Pending</h5>
                <p class="text-sm">
                  Total number of production tasks awaiting completion
                </p>
              </div>
            </div>
            <div class="col-md-4 position-relative">
              <div class="p-3 text-center">
                <h1 class="text-gradient text-info">
                  <span id="state2">
                    {{ num_workers }}
                  </span>
                </h1>
                <h5 class="mt-3">Workers</h5>
                <p class="text-sm">
                  Total number of employees at the enterprise
                </p>
              </div>
              <hr class="vertical dark">
            </div>
            <div class="col-md-4 position-relative">
              <div class="p-3 text-center">
                <h1 class="text-gradient text-info">
                  <span id="state2" >
                    2350
                  </span>
                </h1>
                <h5 class="mt-3">Drones produced</h5>
                <p class="text-sm">last month</p>
              </div>
              <hr class="vertical dark">
            </div>
            <div class="col-md-4 position-relative">
              <div class="p-3 text-center">
                <h1 class="text-gradient text-info">
                  <span id="state6">
                    Manager
                  </span>
                </h1>
                <h5 class="mt-3">Admin</h5>
                <p class="text-sm">admin@mail.com</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

<hr>

<div class="container mt-5">
  <h4>Tasks completed in {{ current_month }}</h4>
  {% if tasks_done_this_month %}
  <table class="table table-striped">
    <thead>
      <tr>
        <th>
          #
        </th>
        <th>
          Name
        </th>
        <th>
          Deadline
        </th>
        <th>
          Type
        </th>
        <th>
          Priority
        </th>
      </tr>
    </thead>
    <tbody>
    {% for task in tasks_done_this_month %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ task.name }}</td>
        <td>{{ task.deadline }}</td>
        <td>{{ task.task_type.name }}</td>
        <td>{{ task.priority }}</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>
  {% else %}
  <p>No tasks completed this month.</p>
{% endif %}

{% endblock content %}

{% block javascripts %}

  <script src="/static/assets/js/plugins/countup.min.js"></script>
  <script src="/static/assets/js/plugins/choices.min.js"></script>
  <script src="/static/assets/js/plugins/rellax.min.js"></script>
  <script src="/static/assets/js/plugins/tilt.min.js"></script>
  <script src="/static/assets/js/plugins/choices.min.js"></script>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTTfWur0PDbZWPr7Pmq8K3jiDp0_xUziI"></script>
  <script src="/static/assets/js/soft-design-system.min.js?v=1.0.1" type="text/javascript"></script>
  <script type="text/javascript">
    if (document.getElementById('state1')) {
      const countUp = new CountUp('state1', document.getElementById("state1").getAttribute("countTo"));
      if (!countUp.error) {
        countUp.start();
      } else {
        console.error(countUp.error);
      }
    }
    if (document.getElementById('state2')) {
      const countUp1 = new CountUp('state2', document.getElementById("state2").getAttribute("countTo"));
      if (!countUp1.error) {
        countUp1.start();
      } else {
        console.error(countUp1.error);
      }
    }
    if (document.getElementById('state3')) {
      const countUp2 = new CountUp('state3', document.getElementById("state3").getAttribute("countTo"));
      if (!countUp2.error) {
        countUp2.start();
      } else {
        console.error(countUp2.error);
      };
    }
  </script>

{% endblock javascripts %}
